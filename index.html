<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <link href="front/css/chessboard-1.0.0.min.css" rel="stylesheet">
    <link href="front/css/style.css" rel="stylesheet">

    <title>ChessBoard Test</title>
</head>
<body>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="front/js/chessboard-1.0.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
Status: <span id="status"></span>
<div id="myBoard" style="width: 400px; margin: auto;"></div>
<p>FEN: <span id="fen"></span></p>
<p>PGN: <span id="pgn"></span></p>
<script src="front/js/legalMoves.js"></script>

<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();

    // Connect to the server
    socket.on('connect', () => {
        console.log('Connected to the server');
        document.getElementById('status').textContent = 'Connected';
    });

    // Handle disconnection
    socket.on('disconnect', () => {
        console.log('Disconnected from server');
        document.getElementById('status').textContent = 'Disconnected';
    });

    // Listen for updates on the chess game
    socket.on('gameUpdate', (gameState) => {
        console.log('Game state received:', gameState);
        // Update the chessboard based on the received game state
        board.position(gameState.fen);
        document.getElementById('fen').textContent = gameState.fen;
        document.getElementById('pgn').textContent = gameState.pgn;
    });

    // Send a move to the server when a piece is moved
    board.onDrop = (source, target) => {
        const move = { from: source, to: target };
        socket.emit('move', move);
        console.log('Move sent:', move);
    };
</script>

</body>
</html>
